# ==============================================
# CarbonScore Environment Configuration
# ==============================================

# Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/carbogo
POSTGRES_DB=carbogo
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# Redis Configuration
REDIS_URL=redis://localhost:6379

# Next.js Frontend Configuration
NODE_ENV=development
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_SECRET=your-super-secret-nextauth-key-change-this-in-production
NEXTAUTH_URL=http://localhost:3000

# Service URLs (for inter-service communication)
CALC_SERVICE_URL=http://localhost:8000
ML_SERVICE_URL=http://localhost:8010
PDF_SERVICE_URL=http://localhost:8020
LLM_SERVICE_URL=http://localhost:8030
WORKER_SERVICE_URL=http://localhost:8040

# LLM API Keys (get from respective providers)
OPENAI_API_KEY=sk-your-openai-api-key-here
GROK_API_KEY=gsk_your-grok-api-key-here
CLAUDE_API_KEY=sk-ant-your-claude-api-key-here

# Embedding Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# MLflow Configuration
MLFLOW_TRACKING_URI=postgresql://postgres:postgres@localhost:5432/carbogo
MLFLOW_ARTIFACT_ROOT=/data/artifacts/mlflow
MLFLOW_SERVER_URL=http://localhost:5000

# Vector Store Configuration
VECTOR_STORE_TYPE=pgvector  # Options: pgvector, faiss
PGVECTOR_ENABLED=true

# File Storage Configuration
PERSISTENT_ARTIFACT_DIR=/data/artifacts
PDF_OUTPUT_PATH=/data/artifacts/reports
MODEL_STORAGE_PATH=/data/artifacts/models
UPLOAD_MAX_SIZE=10485760  # 10MB in bytes

# ADEME Data Configuration
ADEME_DATA_PATH=/data/basecarbone-v17-fr.csv
ADEME_VERSION=v17
FACTOR_CACHE_TTL=3600  # 1 hour in seconds

# Security Configuration
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_EXPIRY=24h
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=900  # 15 minutes in seconds

# Email Configuration (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@carbonscore.com

# Monitoring & Analytics
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
GOOGLE_ANALYTICS_ID=GA_MEASUREMENT_ID
POSTHOG_API_KEY=your-posthog-api-key

# Feature Flags
ENABLE_ML_FEATURES=true
ENABLE_LLM_FEATURES=true
ENABLE_CHAT_ASSISTANT=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_MULTI_TENANT=false

# Logging Configuration
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR
LOG_FORMAT=json
LOG_FILE_PATH=/data/artifacts/logs

# Cache Configuration
CACHE_TTL_SHORT=300    # 5 minutes
CACHE_TTL_MEDIUM=1800  # 30 minutes
CACHE_TTL_LONG=3600    # 1 hour

# Background Job Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
WORKER_CONCURRENCY=4

# Railway Production Configuration (uncomment for Railway deployment)
# PORT=8000
# RAILWAY_STATIC_URL=https://your-app.railway.app
# RAILWAY_ENVIRONMENT=production

# Development Tools
ENABLE_DEBUG_TOOLBAR=true
ENABLE_PROFILER=false
MOCK_LLM_RESPONSES=false
SKIP_EMAIL_VERIFICATION=true

# Business Configuration
DEFAULT_CURRENCY=EUR
SUPPORTED_LANGUAGES=fr,en
DEFAULT_LANGUAGE=fr
COMPANY_SIZE_BRACKETS=1-10,11-50,51-250,251-1000,1000+

# PDF Generation Configuration
PDF_TEMPLATE_PATH=/app/templates
PDF_FONT_PATH=/app/fonts
PDF_DPI=300
PDF_QUALITY=high

# ML Model Configuration
MODEL_RETRAIN_SCHEDULE=0 2 * * 0  # Weekly on Sunday at 2 AM
ANOMALY_THRESHOLD=0.8
IMPUTATION_CONFIDENCE_THRESHOLD=0.7
BENCHMARK_UPDATE_FREQUENCY=monthly

# API Rate Limiting
API_RATE_LIMIT_ANONYMOUS=10/minute
API_RATE_LIMIT_AUTHENTICATED=100/minute
API_RATE_LIMIT_PREMIUM=1000/minute

# Backup Configuration
BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/data/artifacts/backups

# ==============================================
# Instructions:
# 1. Copy this file to .env
# 2. Replace all placeholder values with actual values
# 3. Never commit .env to version control
# 4. For production, use Railway's environment variables UI
# ==============================================
